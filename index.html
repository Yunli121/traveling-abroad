<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘çš„æ—…éŠéš¨è¡Œæ‰‹å†Š</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
        :root { --primary: #5da9e9; --bg: #f8f9fa; --accent: #ff9f43; --green: #2ecc71; --red: #ff4d4d; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; height: 100vh; display: flex; flex-direction: column; }
        
        .nav-bar { display: flex; background: white; border-bottom: 1px solid #ddd; padding: 10px 2px; justify-content: space-around; z-index: 100; overflow-x: auto; }
        .nav-item { font-size: 10px; color: #777; border: none; background: none; cursor: pointer; display: flex; flex-direction: column; align-items: center; min-width: 55px; }
        .nav-item.active { color: var(--primary); font-weight: bold; }

        .swiper { width: 100%; flex: 1; }
        .swiper-slide { padding: 20px; box-sizing: border-box; overflow-y: auto; background: #fff; }
        
        /* å°é¢ */
        .cover-page { display: flex; flex-direction: column; height: 100%; padding: 10px 0; }
        #displayTitle { font-size: 1.6rem; margin: 0; font-weight: bold; text-align: center; color: #333; }
        #displayDate { font-size: 0.9rem; color: #888; text-align: center; margin-bottom: 10px; }
        .cover-img-container { width: 100%; flex: 1; background: #f0f0f0; border-radius: 12px; overflow: hidden; position: relative; border: 1px solid #eee; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; }
        .cover-img-container img { width: 100%; height: 100%; object-fit: cover; }
        .mini-controls { display: flex; justify-content: center; gap: 10px; padding: 0 10px; }
        .mini-input { border: none; border-bottom: 1px solid #ddd; font-size: 12px; padding: 4px; color: #999; width: 45%; background: transparent; text-align: center; }

        /* é€šç”¨å…ƒä»¶ */
        h2 { border-left: 5px solid var(--primary); padding-left: 10px; color: #333; margin: 0 0 15px 0; font-size: 1.1rem; }
        .input-group { display: flex; gap: 8px; margin-bottom: 15px; background: #f0f2f5; padding: 10px; border-radius: 8px; flex-direction: column; }
        .input-row { display: flex; gap: 5px; }
        input, textarea { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; min-width: 0; }
        button { border: none; border-radius: 4px; padding: 8px 12px; cursor: pointer; white-space: nowrap; }
        .btn-add { background: var(--primary); color: white; }
        .btn-del { background: #ffeded; color: #ff4d4d; border-radius: 20px; font-size: 12px; padding: 4px 10px; }
        .list-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }

        /* å·¥å…·ç®±ä¿®æ­£ */
        .calc-box { background: #fffbe6; border: 1px solid #ffe58f; padding: 12px; border-radius: 8px; margin-bottom: 15px; }
        .calc-result { font-size: 1.4rem; color: var(--green); font-weight: bold; text-align: center; margin-top: 10px; border-top: 1px dashed #ffe58f; padding-top: 10px; }
        .reset-section { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; text-align: center; }
        .btn-reset { background: var(--red); color: white; width: 100%; padding: 12px; font-weight: bold; }
    </style>
</head>
<body>

<div class="nav-bar">
    <button class="nav-item active" onclick="goToPage(0)">ğŸ <span>å°é¢</span></button>
    <button class="nav-item" onclick="goToPage(1)">ğŸ“‹<span>æ¸…å–®</span></button>
    <button class="nav-item" onclick="goToPage(2)">âœˆï¸<span>è¡Œç¨‹</span></button>
    <button class="nav-item" onclick="goToPage(3)">ğŸ’°<span>èŠ±è²»</span></button>
    <button class="nav-item" onclick="goToPage(4)">ğŸ<span>ä¼´æ‰‹ç¦®</span></button>
    <button class="nav-item" onclick="goToPage(5)">ğŸ› ï¸<span>å·¥å…·</span></button>
</div>

<div class="swiper">
    <div class="swiper-wrapper">
        
        <div class="swiper-slide">
            <div class="cover-page">
                <h1 id="displayTitle">æˆ‘çš„æ—…è¡Œæ‰‹å†Š</h1>
                <div id="displayDate">å°šæœªè¨­å®šæ—¥æœŸ</div>
                <div class="cover-img-container" onclick="document.getElementById('coverInput').click()">
                    <img id="coverDisplay" src="" style="display:none;">
                    <div style="color:#bbb; font-size: 14px;" id="hintText">ï¼‹ è¨­å®šå°é¢ç…§ç‰‡</div>
                </div>
                <div class="mini-controls">
                    <input type="file" id="coverInput" accept="image/*" style="display:none" onchange="loadCover(this)">
                    <input type="text" class="mini-input" placeholder="æ—…ç¨‹æ¨™é¡Œ" oninput="updateTitle(this.value)">
                    <input type="date" class="mini-input" onchange="updateDate(this.value)">
                </div>
            </div>
        </div>

        <div class="swiper-slide">
            <h2>ğŸ“‹ æº–å‚™æ¸…å–®</h2>
            <div class="input-group">
                <div class="input-row">
                    <input type="text" id="todoInput" placeholder="æ–°å¢æ¸…å–®é …ç›®...">
                    <button class="btn-add" onclick="addItem('todoList', 'todoInput')">ï¼‹</button>
                </div>
            </div>
            <div id="todoList">
                <div class="list-item"><span><input type="checkbox"> è­·ç…§ & ç°½è­‰</span><button class="btn-del" onclick="this.parentElement.remove()">åˆªé™¤</button></div>
                <div class="list-item"><span><input type="checkbox"> å¤–å¹£ & ä¿¡ç”¨å¡</span><button class="btn-del" onclick="this.parentElement.remove()">åˆªé™¤</button></div>
            </div>
        </div>

        <div class="swiper-slide">
            <h2>âœˆï¸ è¡Œç¨‹è¦åŠƒ</h2>
            <div class="input-group">
                <input type="date" id="itinDate" style="margin-bottom: 8px;">
                <div class="input-row">
                    <input type="text" id="itineraryInput" placeholder="æ™¯é»åç¨±...">
                    <button class="btn-add" onclick="addItinerary()">ï¼‹</button>
                </div>
            </div>
            <div id="itineraryList"></div>
        </div>

        <div class="swiper-slide">
            <h2>ğŸ’° æ¯æ—¥èŠ±è²»</h2>
            <div class="input-group">
                <input type="text" id="expName" placeholder="é …ç›®å…§å®¹">
                <div class="input-row" style="margin-top:5px;">
                    <input type="number" id="expAmount" placeholder="é‡‘é¡">
                    <button class="btn-add" onclick="addExpense()" style="flex:1;">è¨˜å¸³</button>
                </div>
            </div>
            <div id="expenseList"></div>
            <div style="background:var(--accent); color:white; padding:15px; border-radius:8px; text-align:center; font-size:1.1rem; margin-top:15px;">ç¸½æ”¯å‡º: $<span id="totalDisplay">0</span></div>
        </div>

        <div class="swiper-slide">
            <h2>ğŸ ä¼´æ‰‹ç¦®æ¸…å–®</h2>
            <div class="input-group">
                <div class="input-row">
                    <input type="text" id="giftInput" placeholder="å“å">
                    <input type="file" id="giftImgInput" accept="image/*" style="display:none" onchange="previewGiftImg(this)">
                    <button onclick="document.getElementById('giftImgInput').click()" style="background:#ddd;">ğŸ“·</button>
                </div>
                <div class="input-row" style="margin-top:8px;">
                    <input type="number" id="giftAmount" placeholder="åƒ¹æ ¼">
                    <button class="btn-add" onclick="addGift()" style="flex:1;">ï¼‹</button>
                </div>
            </div>
            <div id="giftPreView" style="margin-bottom:10px; font-size: 12px; color: var(--green);"></div>
            <div id="giftList"></div>
        </div>

        <div class="swiper-slide">
            <h2>ğŸ› ï¸ æ—…éŠå·¥å…·ç®±</h2>
            <div class="calc-box">
                <strong>ğŸ’± åŒ¯ç‡æ›ç®— (è¼¸å…¥å³æ›´æ–°)</strong>
                <div style="display:flex; gap:8px; margin-top:10px;">
                    <input type="number" id="rate" placeholder="åŒ¯ç‡ (ä¾‹ 0.22)" oninput="calcExchange()">
                    <input type="number" id="foreignAmount" placeholder="å¤–å¹£é‡‘é¡" oninput="calcExchange()">
                </div>
                <div class="calc-result">â‰ˆ NT$ <span id="twAmount">0</span></div>
            </div>

            <h2>ğŸ“ æ—…éŠç­†è¨˜</h2>
            <textarea id="noteArea" style="width:100%; height:120px; padding:10px; border-radius:8px; border:1px solid #ccc;" placeholder="ç´€éŒ„é‡è¦å¯†ç¢¼ã€åœ°å€..."></textarea>
            
            <div class="reset-section">
                <p style="font-size:11px; color:#999; margin-bottom:10px;">è­¦å‘Šï¼šé‡ç½®å°‡æ¸…ç©ºæ‰€æœ‰æ‰‹å¯«å…§å®¹</p>
                <button class="btn-reset" onclick="resetAll()">ğŸ—‘ï¸ é‡ç½®æ‰€æœ‰å…§å®¹</button>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    const swiper = new Swiper('.swiper', {
        on: { slideChange: function () {
            document.querySelectorAll('.nav-item').forEach((item, idx) => {
                item.classList.toggle('active', idx === this.activeIndex);
            });
        }}
    });
    function goToPage(index) { swiper.slideTo(index); }

    // åŒ¯ç‡è¨ˆç®—ä¿®æ­£
    function calcExchange() {
        const r = parseFloat(document.getElementById('rate').value);
        const f = parseFloat(document.getElementById('foreignAmount').value);
        const display = document.getElementById('twAmount');
        if (!isNaN(r) && !isNaN(f)) {
            display.innerText = Math.round(r * f).toLocaleString();
        } else {
            display.innerText = "0";
        }
    }

    // é‡ç½®åŠŸèƒ½
    function resetAll() {
        if(confirm("ç¢ºå®šè¦åˆªé™¤æ‰€æœ‰æ—…éŠè¨˜éŒ„å—ï¼Ÿé€™é …å‹•ä½œç„¡æ³•å¾©åŸã€‚")) {
            location.reload(); // é€éé‡æ–°æ•´ç†ç¶²é ä¾†é‚„åŸåˆå§‹ç‹€æ…‹
        }
    }

    // å°é¢åŠŸèƒ½
    function loadCover(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => {
                const img = document.getElementById('coverDisplay');
                img.src = e.target.result;
                img.style.display = 'block';
                document.getElementById('hintText').style.display = 'none';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
    function updateTitle(val) { document.getElementById('displayTitle').innerText = val || "æˆ‘çš„æ—…è¡Œæ‰‹å†Š"; }
    function updateDate(val) { document.getElementById('displayDate').innerText = val ? "å‡ºç™¼æ—¥æœŸï¼š" + val : "å°šæœªè¨­å®šæ—¥æœŸ"; }

    // æ¸…å–®èˆ‡æ¸…å–®åŠŸèƒ½
    function addItem(listId, inputId) {
        const input = document.getElementById(inputId);
        if (!input.value) return;
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span><input type="checkbox"> ${input.value}</span><button class="btn-del" onclick="this.parentElement.remove()">åˆªé™¤</button>`;
        document.getElementById(listId).appendChild(div);
        input.value = '';
    }

    function addItinerary() {
        const d = document.getElementById('itinDate'), t = document.getElementById('itineraryInput');
        if (!t.value) return;
        const dateVal = d.value ? d.value.split('-').slice(1).join('/') : 'æœªå®š';
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span><span style="font-size:11px;background:#e8f4fd;color:#3498db;padding:2px 6px;border-radius:4px;margin-right:8px;">${dateVal}</span>${t.value}</span>
                         <button class="btn-del" onclick="this.parentElement.remove()">åˆªé™¤</button>`;
        document.getElementById('itineraryList').appendChild(div);
        t.value = '';
    }

    let giftTempImg = '';
    function previewGiftImg(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = e => { giftTempImg = e.target.result; document.getElementById('giftPreView').innerHTML = `âœ” åœ–ç‰‡å·²å°±ç·’`; };
            reader.readAsDataURL(input.files[0]);
        }
    }
    function addGift() {
        const i = document.getElementById('giftInput'), a = document.getElementById('giftAmount');
        if (!i.value) return;
        const div = document.createElement('div');
        div.className = 'list-item';
        const imgHtml = giftTempImg ? `<img src="${giftTempImg}" style="width:50px;height:50px;object-fit:cover;border-radius:4px;">` : `<div style="width:50px;height:50px;background:#eee;border-radius:4px;"></div>`;
        const p = a.value ? `<span style="color:#e67e22;font-weight:bold;margin-left:10px;">$${a.value}</span>` : '';
        div.innerHTML = `<div style="display:flex;align-items:center;gap:10px;">${imgHtml} <div>${i.value}${p}</div></div><button class="btn-del" onclick="this.parentElement.remove()">åˆªé™¤</button>`;
        document.getElementById('giftList').appendChild(div);
        i.value = ''; a.value = ''; giftTempImg = ''; document.getElementById('giftPreView').innerHTML = '';
    }

    let total = 0;
    function addExpense() {
        const n = document.getElementById('expName'), a = document.getElementById('expAmount');
        if (!n.value || !a.value) return;
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span>${n.value}</span><span>$${a.value} <button class="btn-del" onclick="removeExp(this, ${a.value})">åˆª</button></span>`;
        document.getElementById('expenseList').appendChild(div);
        total += parseFloat(a.value);
        document.getElementById('totalDisplay').innerText = total;
        n.value = ''; a.value = '';
    }
    function removeExp(btn, val) {
        total -= val;
        document.getElementById('totalDisplay').innerText = total;
        btn.parentElement.parentElement.remove();
    }
</script>
</body>
</html>
